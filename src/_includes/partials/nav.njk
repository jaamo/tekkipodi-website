<header class="site-header">
    <div class="header-container">
        <a href="/" class="header-logo">
            <img src="{{ site.logo }}" alt="{{ site.title }} Logo">
        </a>
        <nav class="main-nav" aria-label="Paanavigaatio">
            <button class="nav-toggle" aria-label="Avaa valikko" aria-expanded="false">
                <span class="nav-toggle-bar"></span>
                <span class="nav-toggle-bar"></span>
                <span class="nav-toggle-bar"></span>
            </button>
            <ul class="nav-list">
                <li><a href="/" class="nav-link{% if page.url == '/' %} nav-link--active{% endif %}">Etusivu</a></li>
                <li><a href="/jaksot/" class="nav-link{% if page.url == '/jaksot/' %} nav-link--active{% endif %}">Jaksot</a></li>
                <li><a href="/vieraskirja/" class="nav-link{% if page.url == '/vieraskirja/' %} nav-link--active{% endif %}">Vieraskirja</a></li>
                <li><a href="/aanessa/" class="nav-link{% if page.url == '/aanessa/' %} nav-link--active{% endif %}">Äänessä</a></li>
                <li class="nav-platforms">
                    <a href="{{ site.podcastLinks.spotify }}" target="_blank" rel="noopener noreferrer" class="platform-icon" aria-label="Spotify">
                        <img src="/images/logo-spotify.svg" alt="Spotify">
                    </a>
                    <a href="{{ site.podcastLinks.apple }}" target="_blank" rel="noopener noreferrer" class="platform-icon" aria-label="Apple Podcasts">
                        <img src="/images/icon-apple.svg" alt="Apple Podcasts">
                    </a>
                    <a href="{{ site.podcastLinks.youtube }}" target="_blank" rel="noopener noreferrer" class="platform-icon" aria-label="YouTube Music">
                        <img src="/images/logo-youtubemusic.svg" alt="YouTube Music">
                    </a>
                    <a href="{{ site.podcastLinks.rss }}" target="_blank" rel="noopener noreferrer" class="platform-icon" aria-label="RSS">
                        <img src="/images/icon-rss.svg" alt="RSS">
                    </a>
                </li>
            </ul>
        </nav>
        <div class="header-listen">
            <button class="header-listen-button" aria-expanded="false" aria-label="Kuuntele - valitse alusta">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
                    <polygon points="5 3 19 12 5 21 5 3"/>
                </svg>
                Kuuntele
            </button>
            <div class="header-listen-panel" aria-hidden="true">
                <a href="{{ site.podcastLinks.spotify }}" target="_blank" rel="noopener noreferrer" class="header-listen-icon" aria-label="Spotify">
                    <img src="/images/logo-spotify.svg" alt="Spotify">
                </a>
                <a href="{{ site.podcastLinks.apple }}" target="_blank" rel="noopener noreferrer" class="header-listen-icon" aria-label="Apple Podcasts">
                    <img src="/images/icon-apple.svg" alt="Apple Podcasts">
                </a>
                <a href="{{ site.podcastLinks.youtube }}" target="_blank" rel="noopener noreferrer" class="header-listen-icon" aria-label="YouTube Music">
                    <img src="/images/logo-youtubemusic.svg" alt="YouTube Music">
                </a>
                <a href="{{ site.podcastLinks.rss }}" target="_blank" rel="noopener noreferrer" class="header-listen-icon" aria-label="RSS">
                    <img src="/images/icon-rss.svg" alt="RSS">
                </a>
            </div>
        </div>
    </div>
</header>
<script>
(function() {
    var toggle = document.querySelector('.nav-toggle');
    var navList = document.querySelector('.nav-list');
    if (toggle && navList) {
        toggle.addEventListener('click', function() {
            var open = navList.classList.toggle('nav-list--open');
            toggle.setAttribute('aria-expanded', open);
        });
        navList.addEventListener('click', function(e) {
            if (e.target.classList.contains('nav-link')) {
                navList.classList.remove('nav-list--open');
                toggle.setAttribute('aria-expanded', 'false');
            }
        });
    }

    var listenBtn = document.querySelector('.header-listen-button');
    var listenPanel = document.querySelector('.header-listen-panel');
    var listenWrap = document.querySelector('.header-listen');
    if (listenBtn && listenPanel) {
        function toggleListen() {
            var isOpen = listenWrap.classList.toggle('header-listen--open');
            listenBtn.setAttribute('aria-expanded', isOpen);
            listenPanel.setAttribute('aria-hidden', !isOpen);
        }
        listenBtn.addEventListener('click', toggleListen);
        document.addEventListener('click', function(e) {
            if (!listenWrap.contains(e.target) && listenWrap.classList.contains('header-listen--open')) {
                listenWrap.classList.remove('header-listen--open');
                listenBtn.setAttribute('aria-expanded', 'false');
                listenPanel.setAttribute('aria-hidden', 'true');
            }
        });
    }
})();
</script>
